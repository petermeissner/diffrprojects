---
title: "Text Tools"
author: "Peter MeiÃŸner"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

The package comes with a number of additional basic text handling tools that are introduced here.


  **text_read**

text_read() is a wrapper around base R's readLines() that will always assume that files are in UTF-8 (you can specify otherwise) and will always re-encode files that were read in to UTF-8. Furthermore, text_read() will by default not split your text into parts - e.g. it will return a vector of length 1. If the tokenize parameter is set the text will be split into parts using strsplit(). If tokenize is a function instead of string (used as regular expression) text_read() will use apply that function to the text for tokenization. As the tokize function is simply passed trough and applied without furhter ado it can in fact be used for any kind of desired direct transformation / cleaning / manipulation of the text on read-in.

```{r}
library(diffrprojects)
fpath <- system.file( "testfiles/robinson_crusoe_gutenberg.txt", package = "diffrprojects")

# standard usage 
robinson_crusoe <- text_read(fpath)
length(robinson_crusoe)


# using tokenize parameter
robinson_crusoe <- text_read(fpath, tokenize="")
length(robinson_crusoe)
robinson_crusoe[100:110]

robinson_crusoe <- text_read(fpath, tokenize="\n")
length(robinson_crusoe)
robinson_crusoe[100:110]

tokenizer_deluxe <- function(x){
  unlist(strsplit(x, "\\W+"))
}
robinson_crusoe <- text_read(fpath, tokenize=tokenizer_deluxe)
length(robinson_crusoe)
robinson_crusoe[100:110]

# using encoding parameter
robinson_crusoe <- text_read(fpath, encoding="latin1")
Encoding(robinson_crusoe)

robinson_crusoe <- text_read(fpath, encoding="UTF-8")
Encoding(robinson_crusoe)
```


**text_nchar**

text_nchar is a simple wrapper around base R's nchar function with the slight difference that it will output NA for NA inputs.

```{r}
text_vector <- c(NA, 1, 234, NA)

text_nchar(text_vector)
nchar(text_vector)
```


**text_length**

text_length is a combination of base R's nchar() and the sum() function to get the summed up number of characters in one character vector. The only difference is that (same as for text_nchar()) NA inputs will be translated to NA outputs. This also means that the na.rm option stemming from sum() has to be set explicitly to TRUE to get a non NA value in case of any vector element beeing equal to NA.
  
```{r}
text_vector <- c(NA,1,234,NA)

text_length(text_vector)
text_length(text_vector, na.rm = TRUE)
```

  **text_snippet**

  **text_show**

  **text_tokenize**


  **text_tokenize_words**


  **text_extract**


  **text_extract_all**


